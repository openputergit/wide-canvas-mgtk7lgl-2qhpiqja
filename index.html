<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodConnect Blockchain</title>
    <script src="https://unpkg.com/web3@1.6.0/dist/web3.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@metamask/detect-provider"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-green-50 min-h-screen">
    <nav class="bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-green-600">FoodConnect</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="connectWallet" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                        Connect Wallet
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 py-8">
        <div class="mb-8 text-center">
            <h1 class="text-4xl font-bold text-gray-800 mb-4">Blockchain-Backed Food Redistribution</h1>
            <p class="text-gray-600">Choose your role to get started</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Donor Card -->
            <div class="glass-effect rounded-xl p-6 hover:shadow-xl transition cursor-pointer" onclick="selectRole('donor')">
                <div class="text-3xl text-green-600 mb-4"><i class="bi bi-gift"></i></div>
                <h3 class="text-xl font-semibold mb-2">Donor</h3>
                <p class="text-gray-600">Register food donations and track their journey</p>
            </div>

            <!-- NGO Card -->
            <div class="glass-effect rounded-xl p-6 hover:shadow-xl transition cursor-pointer" onclick="selectRole('ngo')">
                <div class="text-3xl text-blue-600 mb-4"><i class="bi bi-people"></i></div>
                <h3 class="text-xl font-semibold mb-2">NGO</h3>
                <p class="text-gray-600">Manage collections and distributions</p>
            </div>

            <!-- Inspector Card -->
            <div class="glass-effect rounded-xl p-6 hover:shadow-xl transition cursor-pointer" onclick="selectRole('inspector')">
                <div class="text-3xl text-purple-600 mb-4"><i class="bi bi-clipboard-check"></i></div>
                <h3 class="text-xl font-semibold mb-2">Inspector</h3>
                <p class="text-gray-600">Verify and approve food donations</p>
            </div>
        </div>

        <!-- Dashboard Section (Initially Hidden) -->
        <div id="dashboard" class="mt-8 hidden">
            <div id="donorDashboard" class="hidden">
                <h2 class="text-2xl font-bold mb-4">Donor Dashboard</h2>
                <button class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition mb-4" onclick="createDonation()">
                    Create New Donation
                </button>
                <div id="donationsList" class="space-y-4"></div>
            </div>

            <div id="ngoDashboard" class="hidden">
                <h2 class="text-2xl font-bold mb-4">NGO Dashboard</h2>
                <div id="availableDonations" class="space-y-4"></div>
            </div>

            <div id="inspectorDashboard" class="hidden">
                <h2 class="text-2xl font-bold mb-4">Inspector Dashboard</h2>
                <div id="pendingInspections" class="space-y-4"></div>
            </div>
        </div>
    </main>

    <script>
        let currentAccount = null;
        let currentRole = null;

        async function connectWallet() {
            try {
                const provider = await detectEthereumProvider();
                if (provider) {
                    const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
                    currentAccount = accounts[0];
                    document.getElementById('connectWallet').textContent = `${currentAccount.substring(0, 6)}...${currentAccount.substring(38)}`;
                } else {
                    alert('Please install MetaMask!');
                }
            } catch (error) {
                console.error(error);
                alert('Error connecting wallet');
            }
        }

        function selectRole(role) {
            if (!currentAccount) {
                alert('Please connect your wallet first');
                return;
            }

            currentRole = role;
            document.getElementById('dashboard').classList.remove('hidden');
            document.querySelectorAll('[id$="Dashboard"]').forEach(el => el.classList.add('hidden'));
            document.getElementById(`${role}Dashboard`).classList.remove('hidden');

            // Simulate loading data based on role
            if (role === 'donor') {
                loadDonorDashboard();
            } else if (role === 'ngo') {
                loadNGODashboard();
            } else if (role === 'inspector') {
                loadInspectorDashboard();
            }
        }

        function createDonation() {
            // Simulate creating a donation on blockchain
            const donation = {
                id: Math.random().toString(36).substr(2, 9),
                status: 'pending',
                timestamp: new Date().toISOString()
            };
            
            const donationCard = document.createElement('div');
            donationCard.className = 'bg-white p-4 rounded-lg shadow';
            donationCard.innerHTML = `
                <h3 class="font-semibold">Donation #${donation.id}</h3>
                <p class="text-gray-600">Status: ${donation.status}</p>
                <p class="text-gray-600">Created: ${new Date(donation.timestamp).toLocaleString()}</p>
            `;
            document.getElementById('donationsList').prepend(donationCard);
        }

        function loadDonorDashboard() {
            // Simulate loading donor's donations
            document.getElementById('donationsList').innerHTML = `
                <div class="bg-white p-4 rounded-lg shadow">
                    <h3 class="font-semibold">Previous Donations</h3>
                    <p class="text-gray-600">No donations yet</p>
                </div>
            `;
        }

        function loadNGODashboard() {
            // Simulate loading available donations
            document.getElementById('availableDonations').innerHTML = `
                <div class="bg-white p-4 rounded-lg shadow">
                    <h3 class="font-semibold">Available Donations</h3>
                    <p class="text-gray-600">No available donations</p>
                </div>
            `;
        }

        function loadInspectorDashboard() {
            // Simulate loading pending inspections
            document.getElementById('pendingInspections').innerHTML = `
                <div class="bg-white p-4 rounded-lg shadow">
                    <h3 class="font-semibold">Pending Inspections</h3>
                    <p class="text-gray-600">No pending inspections</p>
                </div>
            `;
        }

        document.getElementById('connectWallet').addEventListener('click', connectWallet);
    </script>
<script>document.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>
	</body>
</html>